@using ElectroDocument.Controllers.AppContext;
@using Microsoft.EntityFrameworkCore.Metadata;
@using System.Collections;

@{
    ViewData["Title"] = "Создание пользователя";
    IEnumerable<Role> roles = Model.roles;
}


<h2>Форма создания сотрудника</h2>
<form id="employeeForm" action="/Users/Add" onsubmit="return validateForm()" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label for="Name">Имя <span class="error">*</span></label><br>
        <input type="text" class="form-control" id="firstName" name="Name" required><br>
    </div>
    <div class="form-group">
        <label for="Surname">Фамилия <span class="error">*</span></label><br>
        <input type="text" class="form-control" id="lastName" name="Surname" required><br>
    </div>
    <div class="form-group">
        <label for="UserName">Логин <span class="error">*</span></label><br>
        <input type="text" class="form-control" id="login" name="UserName" required><br>
    </div>
    <div class="form-group">
        <label for="Password">Пароль <span class="error">*</span></label><br>
        <input type="password" class="form-control" id="password" name="Password" required><br>
    </div>
    <div class="form-group">
        <label for="Patronymic">Отчество</label><br>
        <input type="text" class="form-control" id="middleName" name="Patronymic"><br>
    </div>
    <div class="form-group">
        <label for="PhoneNumber">Номер телефона</label><br>
        <input type="text" class="form-control" id="phoneNumber" name="PhoneNumber"><br>
    </div>
    <div class="form-group">
        <label for="Address">Адрес проживания</label><br>
        <input type="text" class="form-control" id="address" name="Address"><br>
    </div>
    <div class="form-group">
        <label for="Role">Должность <span class="error">*</span></label><br>
        <select class="form-control" id="Role" name="Role" required>
            <option value="">Выберите должность</option>
            @foreach (Role r in roles)
            {
                <option value="@r.Id">@r.Title</option>
            }
        </select><br>
    </div>
    <div class="form-group">
        <label for="Image">Изображение</label><br>
        <input type="file" class="form-control-file" id="image" name="Image"><br>
    </div>
    <br>
    <br>
    <div class="form-group">
        <input type="submit" class="btn btn-primary" value="Создать">
    </div>
</form>

<script>
    function validateForm() {
        var firstName = document.getElementById("firstName").value;
        var lastName = document.getElementById("lastName").value;
        var login = document.getElementById("login").value;
        var password = document.getElementById("password").value;
        var role = document.getElementById("role").value;

        var errorMessages = [];

        if (!firstName.trim()) {
            errorMessages.push("Введите имя.");
        }
        if (!lastName.trim()) {
            errorMessages.push("Введите фамилию.");
        }
        if (!login.trim()) {
            errorMessages.push("Введите логин.");
        }
        if (!password.trim()) {
            errorMessages.push("Введите пароль.");
        }
        if (!role.trim()) {
            errorMessages.push("Выберите уровень доступа.");
        }

        if (errorMessages.length > 0) {
            alert(errorMessages.join("\n"));
            return false;
        }

        return true;
    }
</script>
